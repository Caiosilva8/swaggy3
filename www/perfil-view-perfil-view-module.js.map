{"version":3,"sources":["webpack:///./src/app/perfil-view/perfil-view.module.ts","webpack:///./src/app/perfil-view/perfil-view.page.html","webpack:///./src/app/perfil-view/perfil-view.page.scss","webpack:///./src/app/perfil-view/perfil-view.page.ts"],"names":[],"mappings":"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","file":"perfil-view-perfil-view-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PerfilViewPage } from './perfil-view.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PerfilViewPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [PerfilViewPage]\r\n})\r\nexport class PerfilViewPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>perfil-view</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n  <form [formGroup]=\\\"formGroup\\\">\\r\\n    <ion-list>\\r\\n      <ion-item>\\r\\n        <ion-label floating>Nome</ion-label>\\r\\n        <ion-input formControlName=\\\"nome\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label floating>Cidade</ion-label>\\r\\n        <ion-input formControlName=\\\"cidade\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label floating>Estado</ion-label>\\r\\n        <ion-input formControlName=\\\"estado\\\"></ion-input>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n\\r\\n    <ion-button expand=\\\"full\\\" fill=\\\"outline\\\" (click)=\\\"atualizarP()\\\">Atualizar</ion-button>\\r\\n    <ion-button color=\\\"danger\\\" expand=\\\"full\\\" fill=\\\"outline\\\" (click)=\\\"cancelar()\\\">Cancelar</ion-button>\\r\\n\\r\\n  </form>\\r\\n</ion-content>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BlcmZpbC12aWV3L3BlcmZpbC12aWV3LnBhZ2Uuc2NzcyJ9 */\"","import { AngularFireAuth } from 'angularfire2/auth';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport * as firebase from 'firebase';\r\nimport { Perfil } from '../model/perfil';\r\nimport { ToastController, LoadingController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-perfil-view',\r\n  templateUrl: './perfil-view.page.html',\r\n  styleUrls: ['./perfil-view.page.scss'],\r\n})\r\nexport class PerfilViewPage implements OnInit {\r\n\r\n  idUsuario : string;\r\n  perfil : Perfil = new Perfil();\r\n  firestore = firebase.firestore();\r\n  settings = { timestampsInSnapshots: true };\r\n  formGroup : FormGroup;\r\n\r\n  constructor(public formBuilder : FormBuilder,\r\n              public toastController : ToastController,\r\n              public firebaseauth:AngularFireAuth,\r\n              public loadingController : LoadingController,\r\n              public router : Router) {\r\n\r\n                this.firebaseauth.authState.subscribe(obj=>{\r\n                  this.idUsuario = this.firebaseauth.auth.currentUser.uid;\r\n\r\n                  let ref = this.firestore.collection('perfil/').doc(this.idUsuario)\r\n                  ref.get().then(doc=> {\r\n                      this.perfil.setDados(doc.data());\r\n       \r\n                      this.formGroup.controls['nome'].setValue(this.perfil.nome);\r\n                      this.formGroup.controls['cidade'].setValue(this.perfil.cidade);\r\n                      this.formGroup.controls['estado'].setValue(this.perfil.estado);\r\n                  });\r\n            \r\n                });\r\n\r\n                this.form();\r\n\r\n                   \r\n          \r\n   }\r\n  \r\n\r\n   form(){\r\n     this.formGroup = this.formBuilder.group({\r\n       nome : [],\r\n       cidade : [],\r\n       estado : [],\r\n       pontos : []\r\n     });\r\n   }\r\n\r\n  ngOnInit() {\r\n  }\r\n  \r\n\r\n\r\n  atualizarP(){\r\n    let ref = this.firestore.collection('perfil')\r\n    ref.doc(this.idUsuario).set(this.formGroup.value)\r\n    .then(()=>{\r\n      this.toast('Atualizado com Sucesso');\r\n      this.router.navigate(['/perfil']);\r\n      this.loadingController.dismiss();\r\n    }).catch(()=>{\r\n      this.toast('Erro ao Atualizar')\r\n    })\r\n  }\r\n\r\n\r\n  async toast(msg : string) {\r\n    const toast = await this.toastController.create({\r\n      message: 'Cadastrado com sucesso!',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async loading() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Carregando',\r\n      duration: 2000\r\n    });\r\n    await loading.present();\r\n  }\r\n\r\n  cancelar(){\r\n    this.router.navigate(['/perfil']);\r\n  }\r\n}\r\n"],"sourceRoot":""}