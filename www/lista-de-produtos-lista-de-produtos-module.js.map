{"version":3,"sources":["webpack:///./src/app/lista-de-produtos/lista-de-produtos.module.ts","webpack:///./src/app/lista-de-produtos/lista-de-produtos.page.html","webpack:///./src/app/lista-de-produtos/lista-de-produtos.page.scss","webpack:///./src/app/lista-de-produtos/lista-de-produtos.page.ts","webpack:///./src/app/model/item.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEkB;AACH;AAE5D,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2EAAmB;KAC/B;CACF,CAAC;AAaF;IAAA;IAAwC,CAAC;IAA5B,yBAAyB;QAXrC,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,2EAAmB,CAAC;YAEnC,SAAS,EAAG,CAAC,uEAAc,CAAC;SAC7B,CAAC;OACW,yBAAyB,CAAG;IAAD,gCAAC;CAAA;AAAH;;;;;;;;;;;;AC5BtC,seAAse,qBAAqB,yKAAyK,eAAe,+BAA+B,sBAAsB,mDAAmD,gBAAgB,uFAAuF,oBAAoB,mBAAmB,oBAAoB,0V;;;;;;;;;;;ACA77B,+DAA+D,mK;;;;;;;;;;;;;;;;;;;;;;;;;ACAb;AACb;AACM;AACF;AAC2B;AACR;AACnB;AACJ;AASrC;IAWE,6BAAmB,MAAc,EACd,iBAAoC,EACpC,WAA4B,EAC5B,eAAiC;QAHjC,WAAM,GAAN,MAAM,CAAQ;QACd,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,gBAAW,GAAX,WAAW,CAAiB;QAC5B,oBAAe,GAAf,eAAe,CAAkB;QAZpD,oBAAe,GAAe,EAAE,CAAC;QAGjC,cAAS,GAAG,kDAAkB,EAAE,CAAC;QACjC,aAAQ,GAAG,EAAC,qBAAqB,EAAE,IAAI,EAAC,CAAC;QAEzC,WAAM,GAAY,IAAI,oDAAM,EAAE,CAAC;IAOhC,CAAC;IAEA,sCAAQ,GAAR;QACE,IAAI,CAAC,OAAO,EAAE,CAAC;IAEjB,CAAC;IAED,yCAAW,GAAX,UAAY,OAAiB;QAC3B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;QACzC,IAAI,GAAG,GAAG,IAAI,CAAC;QAEf,IAAI,CAAC,GAAG,IAAI,gDAAI,EAAE,CAAC;QACnB,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;QACpB,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC;QAEjB,IAAG,IAAI,CAAC,MAAM,IAAE,IAAI,EAAC,EAAE,2BAA2B;YAChD,IAAI,CAAC,MAAM,GAAG,IAAI,oDAAM,EAAE,CAAC,CAAC,wBAAwB;YACpD,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,yBAAyB;SAClD;QAED,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,WAAC;YACzB,IAAG,CAAC,CAAC,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,EAAC;gBAC5B,GAAG,GAAG,KAAK,CAAC;aACb;QACH,CAAC,CAAC,CAAC;QAEH,IAAG,GAAG,IAAE,IAAI;YAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAExC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACxC,CAAC;IAED,uCAAS,GAAT,UAAU,GAAa;QACrB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,eAAe,EAAE,EAAC,SAAS,EAAG,GAAG,CAAC,EAAE,EAAC,CAAC,CAAC,CAAC;IAChE,CAAC;IAED,qCAAO,GAAP;QAAA,iBAuBC;QAtBC,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,GAAG,GAAG,kDAAkB,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACrD,GAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,eAAK;YAClB,KAAK,CAAC,OAAO,CAAC,aAAG;gBACf,IAAI,CAAC,GAAG,IAAI,sDAAO,EAAE,CAAC;gBACtB,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;gBACvB,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC;gBAGd,IAAI,GAAG,GAAG,gDAAgB,EAAE,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,cAAY,GAAG,CAAC,EAAE,SAAM,CAAC,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,aAAG;oBAC1F,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC;oBACb,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC/B,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;oBACV,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC/B,CAAC,CAAC,CAAC;YAIL,CAAC,CAAC,CAAC;YACH,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAE,KAAI,CAAC,eAAe,CAAC;YAC3C,KAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;QACnC,CAAC,CAAC,CAAC;IACL,CAAC;IAAA,CAAC;IAGF,oCAAM,GAAN,UAAO,GAAa;QAApB,iBASC;QARC,IAAI,GAAG,GAAG,kDAAkB,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACrD,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE;aACrB,IAAI,CAAC;YACJ,KAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,KAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC,KAAK,CAAC;YACP,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QACnC,CAAC,CAAC;IACN,CAAC;IAEK,qCAAO,GAAb;;;;;4BACkB,qBAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;4BAClD,OAAO,EAAE,YAAY;4BACrB,QAAQ,EAAE,IAAI;yBACf,CAAC;;wBAHI,OAAO,GAAG,SAGd;wBACF,qBAAM,OAAO,CAAC,OAAO,EAAE;;wBAAvB,SAAuB,CAAC;;;;;KACzB;IA7FU,mBAAmB;QAL/B,+DAAS,CAAC;YACT,QAAQ,EAAE,uBAAuB;YACjC,6HAA4C;;SAE7C,CAAC;+EAY2B,sDAAM;YACK,gEAAiB;YACtB,uEAAc;YACV,8DAAe;OAdzC,mBAAmB,CAgG/B;IAAD,0BAAC;CAAA;AAhG+B;;;;;;;;;;;;;ACdhC;AAAA;AAAA;IAAA;IAGA,CAAC;IAAD,WAAC;AAAD,CAAC","file":"lista-de-produtos-lista-de-produtos-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ListaDeProdutosPage } from './lista-de-produtos.page';\r\nimport { StorageService } from '../service/storage.service';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ListaDeProdutosPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ListaDeProdutosPage],\r\n  \r\n  providers : [StorageService]\r\n})\r\nexport class ListaDeProdutosPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Lista De Produtos</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  \\r\\n  <!-- fab placed to the top end -->\\r\\n  <ion-fab vertical=\\\"top\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n      <ion-fab-button>\\r\\n        <ion-icon name=\\\"cart\\\"></ion-icon>\\r\\n        <ion-badge color=\\\"primary\\\">{{pedido.itens.length}}</ion-badge>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab>\\r\\n\\r\\n  <ion-card *ngFor=\\\"let produto of listaDeProdutos\\\">\\r\\n    <ion-card-header>\\r\\n        <img src=\\\"{{produto?.foto}}\\\">\\r\\n      <ion-card-title>{{produto?.nomeProduto}}</ion-card-title>\\r\\n      <ion-card-subtitle>R$ {{produto?.preco}}</ion-card-subtitle>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content>\\r\\n      <p>{{produto?.descricao}}</p>\\r\\n      <p>{{produto?.categoria}}</p>\\r\\n    </ion-card-content>\\r\\n   \\r\\n    <ion-icon name=\\\"create\\\" size=\\\"large\\\" (click)=\\\"atualizar(produto)\\\"></ion-icon> \\r\\n    <ion-icon name=\\\"trash\\\"  size=\\\"large\\\" (click)=\\\"remove(produto)\\\"></ion-icon>\\r\\n    <ion-icon name=\\\"cart\\\"  size=\\\"large\\\" (click)=\\\"addCarrinho(produto)\\\"></ion-icon>\\r\\n  </ion-card>\\r\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xpc3RhLWRlLXByb2R1dG9zL2xpc3RhLWRlLXByb2R1dG9zLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport * as firebase from 'firebase';\r\nimport { Produto } from '../model/produto';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, ToastController } from '@ionic/angular';\r\nimport { StorageService } from '../service/storage.service';\r\nimport { Pedido } from '../model/pedido';\r\nimport { Item } from '../model/item';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\n\r\n@Component({\r\n  selector: 'app-lista-de-produtos',\r\n  templateUrl: './lista-de-produtos.page.html',\r\n  styleUrls: ['./lista-de-produtos.page.scss'],\r\n})\r\nexport class ListaDeProdutosPage implements OnInit {\r\n\r\n  listaDeProdutos : Produto[] = [];\r\n  id : string;\r\n\r\n  firestore = firebase.firestore();\r\n  settings = {timestampsInSnapshots: true};\r\n\r\n  pedido : Pedido = new Pedido();\r\n  formGroup  : FormGroup;\r\n\r\n  constructor(public router: Router,\r\n              public loadingController: LoadingController,\r\n              public storageServ : StorageService,\r\n              public toastController : ToastController) {\r\n }\r\n\r\n  ngOnInit() {\r\n    this.getList();\r\n    \r\n  }\r\n\r\n  addCarrinho(produto : Produto){\r\n    this.pedido = this.storageServ.getCart();\r\n    let add = true;\r\n\r\n    let i = new Item();\r\n    i.produto = produto;\r\n    i.quantidade = 1;\r\n\r\n    if(this.pedido==null){ // Caso pedido esteja vazio\r\n      this.pedido = new Pedido(); //cria umm novo pedido  \r\n      this.pedido.itens = []; //cria uma lista de itens\r\n    }\r\n\r\n    this.pedido.itens.forEach(p => {\r\n      if(p.produto.id == produto.id){\r\n        add = false;\r\n      }\r\n    });\r\n\r\n    if(add==true) this.pedido.itens.push(i);\r\n\r\n    this.storageServ.setCart(this.pedido);\r\n  }\r\n\r\n  atualizar(obj : Produto){\r\n    this.router.navigate(['/produto-view', {'produto' : obj.id}]);\r\n  }\r\n\r\n  getList(){\r\n    this.loading();\r\n    var ref = firebase.firestore().collection(\"produto\");\r\n    ref.get().then(query=>{\r\n      query.forEach(doc=>{\r\n        let c = new Produto();\r\n        c.setDados(doc.data());\r\n        c.id = doc.id;\r\n\r\n\r\n        let ref = firebase.storage().ref().child(`produtos/${doc.id}.jpg`).getDownloadURL().then(url => {\r\n          c.foto = url;\r\n          this.listaDeProdutos.push(c);\r\n        }).catch(err=>{\r\n          this.listaDeProdutos.push(c);\r\n        });\r\n\r\n        \r\n\r\n      });\r\n      console.log(\"Lista \" +this.listaDeProdutos)\r\n      this.loadingController.dismiss();\r\n    });\r\n  };\r\n\r\n  \r\n  remove(obj : Produto){\r\n    var ref = firebase.firestore().collection(\"produto\");\r\n    ref.doc(obj.id).delete()\r\n      .then(()=>{\r\n        this.listaDeProdutos = [];\r\n        this.getList();\r\n      }).catch(()=>{\r\n        console.log('Erro ao atualizar');\r\n      })\r\n  }\r\n\r\n  async loading() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Carregando',\r\n      duration: 2000\r\n    });\r\n    await loading.present();\r\n  }\r\n\r\n\r\n}","import { Produto } from './produto';\r\n\r\nexport class Item {\r\n    produto : Produto;\r\n    quantidade : Number;\r\n}"],"sourceRoot":""}